<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Double Slit Experiment Simulator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    #controls {
        margin-bottom: 20px;
    }
    .control-group {
        margin: 10px 0;
    }
    label {
        display: inline-block;
        width: 150px;
        text-align: right;
    }
    input[type="range"] {
        width: 300px;
    }
    #simulationCanvas {
        border: 1px solid #ccc;
        margin-top: 20px;
    }
</style>
</head>
<body>

<h1>Double Slit Experiment Simulator</h1>

<div id="controls">
    <div class="control-group">
        <label for="wavelength">Wavelength (nm):</label>
        <input type="range" id="wavelength" min="380" max="750" value="550">
        <span id="wavelengthValue">550</span>
    </div>
    <div class="control-group">
        <label for="slitWidth">Slit Width (μm):</label>
        <input type="range" id="slitWidth" min="10" max="100" value="50">
        <span id="slitWidthValue">50</span>
    </div>
    <div class="control-group">
        <label for="slitSeparation">Slit Separation (μm):</label>
        <input type="range" id="slitSeparation" min="100" max="1000" value="500">
        <span id="slitSeparationValue">500</span>
    </div>
    <div class="control-group">
        <label for="screenDistance">Screen Distance (m):</label>
        <input type="range" id="screenDistance" min="1" max="10" value="5">
        <span id="screenDistanceValue">5</span>
    </div>
</div>

<canvas id="simulationCanvas" width="800" height="400"></canvas>

<script>
// JavaScript code to handle the simulation

// Canvas setup
const canvas = document.getElementById('simulationCanvas');
const ctx = canvas.getContext('2d');

// DOM elements
const wavelengthSlider = document.getElementById('wavelength');
const slitWidthSlider = document.getElementById('slitWidth');
const slitSeparationSlider = document.getElementById('slitSeparation');
const screenDistanceSlider = document.getElementById('screenDistance');

const wavelengthValue = document.getElementById('wavelengthValue');
const slitWidthValue = document.getElementById('slitWidthValue');
const slitSeparationValue = document.getElementById('slitSeparationValue');
const screenDistanceValue = document.getElementById('screenDistanceValue');

// Update displayed values and simulation
function updateSimulation() {
    // Update the displayed values
    wavelengthValue.textContent = wavelengthSlider.value;
    slitWidthValue.textContent = slitWidthSlider.value;
    slitSeparationValue.textContent = slitSeparationSlider.value;
    screenDistanceValue.textContent = screenDistanceSlider.value;

    // Get parameters
    const wavelength = parseFloat(wavelengthSlider.value) * 1e-9; // Convert nm to meters
    const slitWidth = parseFloat(slitWidthSlider.value) * 1e-6;   // Convert μm to meters
    const slitSeparation = parseFloat(slitSeparationSlider.value) * 1e-6; // Convert μm to meters
    const screenDistance = parseFloat(screenDistanceSlider.value); // In meters

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Simulation parameters
    const numPoints = canvas.width;
    const centerX = canvas.width / 2;
    const maxIntensity = 1;

    // Draw intensity pattern
    for (let x = 0; x < numPoints; x++) {
        // Calculate position on screen in meters
        const position = (x - centerX) * 1e-3; // Scale factor for visualization

        // Calculate angle theta
        const theta = Math.atan(position / screenDistance);

        // Calculate beta and gamma
        const beta = (Math.PI * slitWidth * Math.sin(theta)) / wavelength;
        const gamma = (Math.PI * slitSeparation * Math.sin(theta)) / wavelength;

        // Calculate intensity
        let intensity = Math.pow(Math.cos(gamma), 2) * Math.pow(Math.sin(beta) / beta, 2);

        // Handle division by zero
        if (isNaN(intensity)) intensity = maxIntensity;

        // Normalize intensity
        intensity = intensity / maxIntensity;

        // Set color based on wavelength
        const color = wavelengthToColor(wavelengthSlider.value, intensity);

        // Draw the intensity line
        ctx.strokeStyle = color;
        ctx.beginPath();
        ctx.moveTo(x, canvas.height);
        ctx.lineTo(x, canvas.height - intensity * canvas.height);
        ctx.stroke();
    }
}

// Convert wavelength to RGB color
function wavelengthToColor(wavelength, intensity) {
    let R, G, B, alpha;
    const gamma = 0.8;
    const maxIntensity = 255;

    if (wavelength >= 380 && wavelength < 440) {
        R = -(wavelength - 440) / (440 - 380);
        G = 0.0;
        B = 1.0;
    } else if (wavelength >= 440 && wavelength < 490) {
        R = 0.0;
        G = (wavelength - 440) / (490 - 440);
        B = 1.0;
    } else if (wavelength >= 490 && wavelength < 510) {
        R = 0.0;
        G = 1.0;
        B = -(wavelength - 510) / (510 - 490);
    } else if (wavelength >= 510 && wavelength < 580) {
        R = (wavelength - 510) / (580 - 510);
        G = 1.0;
        B = 0.0;
    } else if (wavelength >= 580 && wavelength < 645) {
        R = 1.0;
        G = -(wavelength - 645) / (645 - 580);
        B = 0.0;
    } else if (wavelength >= 645 && wavelength <= 750) {
        R = 1.0;
        G = 0.0;
        B = 0.0;
    } else {
        R = G = B = 0.0;
    }

    // Let the intensity fall off near the vision limits
    if (wavelength >= 380 && wavelength < 420) {
        alpha = 0.3 + 0.7 * (wavelength - 380) / (420 - 380);
    } else if (wavelength >= 420 && wavelength <= 700) {
        alpha = 1.0;
    } else if (wavelength > 700 && wavelength <= 750) {
        alpha = 0.3 + 0.7 * (750 - wavelength) / (750 - 700);
    } else {
        alpha = 0.0;
    }

    R = Math.round(maxIntensity * Math.pow(R * intensity * alpha, gamma));
    G = Math.round(maxIntensity * Math.pow(G * intensity * alpha, gamma));
    B = Math.round(maxIntensity * Math.pow(B * intensity * alpha, gamma));

    return `rgb(${R}, ${G}, ${B})`;
}

// Add event listeners
[wavelengthSlider, slitWidthSlider, slitSeparationSlider, screenDistanceSlider].forEach(slider => {
    slider.addEventListener('input', updateSimulation);
});

// Initial simulation
updateSimulation();
</script>

</body>
</html>
